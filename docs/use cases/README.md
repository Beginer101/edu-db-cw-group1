USER.SIGNIN

    @startuml
    
        |Клієнт|
        start;
        :заходить на сайт та відкриває вікно реєстрації;
        
        |Система|
        :вимагає ввести дані для реєстрації;
        
        |Клієнт|
        :вводить дані для реєстрації;
        
        |Система|
        :обробляє отримані дані від клієнта;
        note right #ffaaaa
        <b>Може виникнути</b>
        <b>InvalidDataException,</b>
        <b>AlreadyRegisteredException</b>
        end note
        :створює облiковий запис;
        :повiдомляe клiенту про успiшне створення облiкового запису;
        
        |Клієнт|
        stop;
    
    @enduml
### SURVEY.EXPORT 
--- 
| **ID:**                | SURVEY.EXPORT                                                                                                                                                                                                                                                                  |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **НАЗВА:**             | Експортувати результати опитування                                                                                                                                                                                                                                             |
| **УЧАСНИКИ:**          | Клієнт, система                                                                                                                                                                                                                                                                |
| **ПЕРЕДУМОВИ:**        | Опитування закрите                                                                                                                                                                                                                                                             |
| **РЕЗУЛЬТАТ:**         | Клієнт отримує результати опитування в обраному форматі                                                                                                                                                                                                                        |
| **ВИКЛЮЧНІ СИТУАЦІЇ:** | Не обрано формат даних - DataFormatRequiredException                                                                                                                                                                                                                           |
| **ОСНОВНИЙ СЦЕНАРІЙ:** | 1. Клієнт обирає опитування<br/>2. Клієнт обирає тип експорту і відправляє запит (може виникнути DataFormatRequiredException)<br/>3. Система обробляє запит та генерує файл з результатами опитування у обраному форматі<br/>4. Клієнт отримує готовий файл в обраному форматі |

2. [Запити зацікавлених осіб](https://daniil-dyachenko.github.io/edu-db-cw-group1/requirements/stakeholders-needs.html)

3. [Модель прецедентів](https://daniil-dyachenko.github.io/edu-db-cw-group1/use%20cases/)


<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

        |Клієнт|
    start;
    :обирає опитування;
    
    |Система|
    :надає варіанти експорту;
    
    |Клієнт|
    :обирає варіант експорту;
    :відправляє запит;
    
    |Система|
    : обробляє запит;
    note right #ffaaaa
    <b> Може виникнути
    <b> DataFormatRequiredException
    end note
    :генерує файл з результатами опитування \n у вибраному форматі;
    
    |Клієнт|
    :отримує готовий файл;
    stop;

USER.SIGNIN

    @startuml
        
        |Клієнт|
        start;
        :клієнт зайшов на сайт та відкрив вікно входу;
        :ввів дані для входу;
        
        |Система|
        :обробляє отримані дані від клієнта;
        note right #ffaaaa
        <b>Може виникнути</b>
        <b>InvalidDataException</b>
        end note
        :авторизовує користувача;
        :дає допуск до облікового запису;
        
        |Клієнт|
        stop;
    
    @enduml

SURVEY.CREATE

    @startuml
        
        |Клієнт|
        start;
        :відкриває опитування;
        :заповнює поля і публiкує;
        
        |Система|
        note right #ffaaaa
        <b>Може виникнути</b>
        <b>EmptySurveyException</b>
        end note
        :перевiряє опитування на допустимiсть;
        :добавляє опитування в базy даних;
        
        |Клієнт|
        stop;
    
    @enduml
</center>

### SURVEY.SHARE
--- 
| **ID:**                | SURVEY.SHARE                                                                                                                                                            |
|------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **НАЗВА:**             | Надати доступ до опитування                                                                                                                                             |
| **УЧАСНИКИ:**          | Клієнт, система                                                                                                                                                         |
| **ПЕРЕДУМОВИ:**        | Клієнт створив опитування                                                                                                                                               |
| **РЕЗУЛЬТАТ:**         | Експерти отримали доступ до проходження опитування                                                                                                                      |
| **ВИКЛЮЧНІ СИТУАЦІЇ:** | Немає                                                                                                                                                                   |
| **ОСНОВНИЙ СЦЕНАРІЙ:** | 1. Клієнт обирає відкрите опитування, яким хоче поділитись<br/>2. Система генерує унікальне посилання, яке дозволяє експертам отримати доступ до проходження опитування |


<center>

@startuml

    |Клієнт| 
    start; 
    :обирає відкрите опитування;
    :натискає на кнопку "поділитись"; 
 
    |Система| 
    :генерує унікальне посилання; 
    |Клієнт|  
    stop; 

@enduml

</center>

### SURVEY.GET_QUESTION 
---
| **ID:**                | SURVEY.GET_QUESTION                                                                                                                                                                                                                          |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **НАЗВА:**             | Отримати статистику відповідей на конкретне питання                                                                                                                                                                                          |
| **УЧАСНИКИ:**          | Клієнт, система                                                                                                                                                                                                                              |
| **ПЕРЕДУМОВИ:**        | Клієнт створив опитування                                                                                                                                                                                                                    |
| **РЕЗУЛЬТАТ:**         | Клієнт отримав статистику відповідей про конкретне запитання                                                                                                                                                                                 |
| **ВИКЛЮЧНІ СИТУАЦІЇ:** | Опитування ніхто не пройшов - EmptyResultsException                                                                                                                                                                                          |
| **ОСНОВНИЙ СЦЕНАРІЙ:** | 1. Клієнт відкриває опитування<br/>2. Клієнт обирає конкретне питання<br/>3. Клієнт надсилає запит для перегляду результатів<br/>4. Система обробляє запит (може виникнути EmptyResultsException)<br/>5. Система надає результати опитування |


<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml 
 
    |Клієнт| 
    start; 
    :відкриває опитування;  
 
    |Система| 
    :отримує дані з БД; 
    :надсилає дані клієнту; 
 
    |Клієнт| 
    :натискає на питання; 
 
 
    |Система| 
    :отримує статистичні дані з БД; 
    note right #ffaaaa 
    <b> Може виникнути 
    <b> EmptyResultsException 
    end note 
    :надсилає дані клієнту; 
 
    |Клієнт|
    :отримує дані про опитування; 
    stop; 
 
@enduml

**Рис.2** Схема клієнта

</center>

## Схема експерта

<center>

@startuml

    actor "Експерт" as Expert

    usecase "EXPERT.TAKE_SURVEY\nПройти опитування" as TakeSurvey
    usecase "EXPERT.CHANGE_ANSWERS\nЗмінити відповіді пройденого опитування" as ChangeAnswers

    Expert -d-> TakeSurvey
    Expert -d-> ChangeAnswers

@enduml

**Рис.3** Схема Експерта

</center>

## Сценарії використання

---  
| **ID:**                | SURVEY.CLOSE                                                                                                                                                                                                                                                                     |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **НАЗВА:**             | Закрити існуюче опитування                                                                                                                                                                                                                                                       |
| **УЧАСНИКИ:**          | Клієнт, система                                                                                                                                                                                                                                                                  |
| **ПЕРЕДУМОВИ:**        | Клієнт створив опитування<br/>Клієнт має права на створення опитування                                                                                                                                                                                                           |
| **РЕЗУЛЬТАТ:**         | Система закриває доступ до опитування та фіксує його результати                                                                                                                                                                                                                  |
| **ВИКЛЮЧНІ СИТУАЦІЇ:** | Немає                                                                                                                                                                                                                                                                            |
| **ОСНОВНИЙ СЦЕНАРІЙ:** | 1. Клієнт обирає відкрите опитування<br/>2. Клієнт надсилає запит для закриття опитування <br/>3. Система перевіряє, чи має клієнт право закривати це опитування та чи воно ще не було закрито<br/>4. Система припиняє прийом нових відповідей та зберігає результати опитування |

@startuml

|Клієнт|
start;
:вибирає опитування для закриття;

|Система|
:перевіряє, чи має клієнт право закривати це опитування;
note right #ffaaaa
<b>Може виникнути</b>
<b>NoPermissionException</b>
end note
:закриває опитування;

|Клієнт|
:перевіряє статус опитування;

|Система|
:повертає статус "закрито";

|Клієнт|
stop;

@enduml

--- 

| **ID:**                | SURVEY.GET_RESULTS                                                                                                                                                                                    |
|------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **НАЗВА:**             | Отримати результати опитування                                                                                                                                                                        |
| **УЧАСНИКИ:**          | Клієнт, система                                                                                                                                                                                       |
| **ПЕРЕДУМОВИ:**        | Клієнт зайшов в меню створеного опитування                                                                                                                                                            |
| **РЕЗУЛЬТАТ:**         | Система надає доступ до статистики відповідей на опитування експертів                                                                                                                                 |
| **ВИКЛЮЧНІ СИТУАЦІЇ:** | Опитування ніхто не пройшов - EmptyResultsException                                                                                                                                                   |
| **ОСНОВНИЙ СЦЕНАРІЙ:** | 1. Клієнт відкриває опитування<br/>2. Клієнт надсилає запит для перегляду результатів<br/>3. Система обробляє запит (може виникнути EmptyResultsException)<br/>4. Система надає результати опитування |

@startuml

|Клієнт|
start;
:відкриває опитування;
:надсилає запит для передачі результатів;

|Система|
:обробляє запит (може виникнути EmptyResultsException);
:надає результати опитування;

|Клієнт|
stop;

@enduml

--- 
| **ID:**                | SURVEY.ADD_QUESTION                                                                                                                                                                                                                                |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **НАЗВА:**             | Додати питання до опитування                                                                                                                                                                                                                       |
| **УЧАСНИКИ:**          | Клієнт, система                                                                                                                                                                                                                                    |
| **ПЕРЕДУМОВИ:**        | Клієнт зайшов в меню створеного опитування                                                                                                                                                                                                         |
| **РЕЗУЛЬТАТ:**         | Система додає питання до створеного опитування                                                                                                                                                                                                     |
| **ВИКЛЮЧНІ СИТУАЦІЇ:** | Таке питання вже є в опитуванні - QuestionExistsException                                                                                                                                                                                          |
| **ОСНОВНИЙ СЦЕНАРІЙ:** | 1. Клієнт заходить у вибране опитування<br/>2. Клієнт обирає тип питання <br/>3. Клієнт заповнив питання<br/>4. Система обробляє запит на додавання (може виникнути QuestionExistsException)<br/>5. Система зберігає опитування з доданим питанням |

@startuml

|Клієнт|
start;
:вибирає опитування для відповіді;
:вводить свої відповіді на питання опитування;
:натискає кнопку "Відправити відповіді";

|Система|
:зберігає відповіді користувача;
:повідомляє користувачу про успішне збереження відповідей;

|Клієнт|
stop;

@enduml




### Зареєструвати користувача(ненада)

<center>

| ID: | **Register_User**                                                                                                                                                                                                                                                                             |
|:----|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Назва** | Зареєструвати користувача                                                                                                                                                                                                                                                                     |
| **Учасники** | Система, користувач                                                                                                                                                                                                                                                                           |
| **Передумови** | Користувач незареєстрований                                                                                                                                                                                                                                                                   |
| **Результат** | Створено новий обліковий запис                                                                                                                                                                                                                                                                |
| **Виключні ситуації** | EX01.01 Обліковий запис вже існує<br> EX.01.02 Користував ввів хибні дані                                                                                                                                                                                   |

@startuml

|Користувач|
start;
:Натискає на кнопку реєстрації;

|Система|
:Відкриває форму для реєстрації;

|Користувач|
:Вводить дані для реєстрації;
:Підтверджує дані "Зареєструватися"
<font color="red"><b>(можлива EX01.01, EX.01.02);

|Система|
:Заносить дані користувача в базу даних;
:Створює новий обліковий запис;

|Користувач|
stop;
@enduml

</center>

### Авторизувати користувача

| ID: | **Login_User**                                                                                                                                                                                                                                    |
|:----|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Назва** | Авторизувати користувача                                                                                                                                                                                                                           |
| **Учасники** | Система, користувач                                                                                                                                                                                                                                |
| **Передумови** | Користувач зареєстрований, користувач не увійшов в обліковий запис                                                                                                                                                                                 |
| **Результат** | Користувач увійшов в обліковий запис                                                                                                                                                                                                               |
| **Виключні ситуації** | EX02.01 Облікового доступу користувача не існує<br> EX02.02 Користувач ввів хибні дані                                                                                                                                                             |

@startuml

|Користувач|
start;
:Користувач натискає на кнопку авторизації;
:Користувач вводить данні;
:Користувач підтверджує дані
<font color="red"><b>(можлива EX.02.01 EX02.02);

|Система|
:Система дає запит до бази даних;
:Перевіряє наявність облікового запису користувача в системі;
:Надає доступ до особистого кабінету користувача;
:Завантажує користувачу головну сторінку;

|Користувач|
:Користувач увійшов в обліковий запис;

stop;

@enduml

### Вийти з облікового запису

| ID: | **Logout_User**                                                                                                            |
|:----|:---------------------------------------------------------------------------------------------------------------------------|
| **Назва** | Вийти з облікового запису                                                                                                  |
| **Учасники** | Система, користувач                                                                                                        |
| **Передумови** | Користувач зареєстрований, користувач увійшов в обліковий запис                                                            |
| **Результат** | Користувач вийшов з облікового запису                                                                                      |
| **Виключні ситуації** | Відсутні                                                                                                                   |

@startuml

|Користувач|
start;
: Переходить на особисту сторінку;
: \tНатискає кнопку\n"Вихід з облікового запису";

|Система|
: \tБлокує користувачу доступ\nдо особистого кабінету;

|Користувач|
stop;

@enduml

### Видалити обліковий запис користувача

| ID: | **Delete_User**                                                                                                                                                                |
|:----|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Назва** | Видалити обліковий запис користувача                                                                                                                                       |
| **Учасники** | Система, користувач                                                                                                                                                        |
| **Передумови** | Користувач зареєстрований                                                                                                                                                  |
| **Результат** | Обліковий запис користувача видалено                                                                                                                                       |
| **Виключні ситуації** | EX.04.01 Облікового запису користувача не існує    |

@startuml

|Користувач|
start;
: Заходить в особистий кабінет;
: Обирає налаштування профілю;
: \tНатискає кнопку\n"Видалити обліковий запис";

|Система|
: Система запитує підтвердження;

|Користувач|
: Підтверджує видалення облікового запису;

|Система|
: \tСистема дає запит видалення\nданих з бази даних <font color="red"><b>(можлива EX.04.01);
: Система видаляє обліковий запис;

|Користувач|
stop;

@enduml

### Створити опитування

| ID: | **Create_Quiz** |
|:----|:------------|
| **Назва** | Створити нове опитування |
| **Учасники** | Система, користувач |
| **Передумови** | Користувач зареєстрований і перебуває на особистій сторінці |
| **Результат** | Нове опитування |
| **Виключні ситуації** | EX05.01 Опитування порожнє |

@startuml

|Користувач|

    start
    : Переходить на особисту сторінку;
    : Обирає опцію "Створити нове опитування";
    : Натискає на кнопку "Створити";      

|Система|

: Створює форму опитування;
: Повертає форму опитування користувачу;

|Користувач|

: Отримує форму опитування;
: Заповнює форму опитування;
: Натискає на кнопку "Зберегти"\n\t<font color="red"><b>(можлива EX.05.01);

|Система|

: Зберігає форму опитування;
: Вносить опитування до бази даних;

|Користувач|

    stop;

@enduml

### Редагувати опитування

| ID: | **Edit_Quiz** |
|:----|:------------|
| **Назва** | Редагувати опитування |
| **Учасники** | Система, користувач |
| **Передумови** | Користувач має створене опитування |
| **Результат** | Внесені зміни до опитування |
| **Виключні ситуації** | EX06.01 Опитування порожнє <br> EX06.02 Користувач не вніс змін |

@startuml

|Користувач|

    start
    : Переходить на особисту сторінку;
    : Обирає опитування;
    : Натискає на кнопку "Редагувати";      

|Система|

: Повертає форму опитування\nз наявними даними користувачу;

|Користувач|

: Отримує форму опитування;
: Редагує форму опитування;
: Натискає на кнопку "Зберегти"\n<font color="red"><b>(можлива EX06.01, EX06.02);

|Система|
: Зберігає відредаговану форму опитування;
: Вносить зміни до бази даних;

|Користувач|
stop;

@enduml


### Видалити опитування

| ID: | **Delete_Quiz** |
|:----|:------------|
| **Назва** | Видалити опитування |
| **Учасники** | Система, користувач |
| **Передумови** | Користувач має створене опитування |
| **Результат** | Опитування видалене |
| **Виключні ситуації** | Відсутні |

@startuml
|Користувач|
start;
: Користувач переходить на особисту сторінку;
: Користувач видаляє опитування;

|Система|
: Система видаляє опитування з бази даних;

|Користувач|
: Користувач закінчує взаємодію;

|Користувач|
stop;
@enduml

### Поділитися опитуванням

| ID: | **Share_Quiz** |
|:----|:------------|
| **Назва** | Поділитися опитуванням |
| **Учасники** | Система, користувач |
| **Передумови** | Користувач має створене опитування |
| **Результат** | Опитування надіслано респондентам |
| **Виключні ситуації** | Відсутні |

@startuml

|Користувач|
start;
: Користувач переходить на особисту сторінку;
: Користувач обирає потрібне опитування;
: Користувач натискає кнопку "Поділитися опитуванням";
|Система|
: Система генерує посилання;

|Користувач|
: Користувач копіює посилання на опитування;
: Користувач надсилає опитування респондентам;
: Користувач закінчує взаємодію;
|Користувач|
stop;
@enduml

### Пройти опитування

| ID: | **Take_Quiz** |
|:----|:------------|
| **Назва** | Пройти опитування |
| **Учасники** | Система, користувач |
| **Передумови** | Користувач має посилання на опитування |
| **Результат** | Опитування пройдене|
| **Виключні ситуації** | ЕХ09.01 Посилання на опитування не є валідним |

@startuml

|Користувач|
start;
: Користувач переходить за посиланям\n\t\t<font color="red"><b>(можлива ЕХ09.01);
: Користувач дає відповіді на поставлені питання;
: Користувач надсилає відповіді\nнатиснувши кнопку "Надіслати";
|Система|
: \tСистема записує відповіді\nдо бази даних та надсилає результат;

|Користувач|
: Користувач закінчує взаємодію з системою;
|Користувач|
stop;
@enduml

### Переглянути результати опитування

| ID: | **Get_Results** |
|:----|:------------|
| **Назва** | Переглянути результати опитування |
| **Учасники** | Система, користувач |
| **Передумови** | Користувач зареєстрований і пройшов опитування |
| **Результат** | Переглянуто результат опитування |
| **Виключні ситуації** | ЕХ10.01 Посилання на опитування не є валідним |

@startuml

|Користувач|
start;
:Переходить за посиланням на пройдене опитування\n\t\t\t<font color="red"><b>(можлива ЕХ10.01);
:Натискає кнопку "Переглянути результат";

|Система|
:Показує результат опитування;

|Користувач|
stop;

@enduml

### Надати права редактора

| ID: | **Make_Editor** |
|:----|:------------|
| **Назва** | Надати права редактора |
| **Учасники** | Система, користувач |
| **Передумови** | Користувач зареєстрований і перебуває на особистій сторінці, користувач створив опитування |
| **Результат** | Надано права редагування іншому користувачу |
| **Виключні ситуації** | ЕХ11.01 Користувача не знайдено |

@startuml

|Користувач|
start;
:Власник опитування переходить на особисту сторінку;
:Власник опитування обирає потрібне опитування;
:Власник опитування натискає кнопку "Керувати доступом";

|Система|
:Повертає вікно з знайомими користувачами\n\t\tта пошуком користувачів;

|Користувач|
:Власник опитування обирає користувача,\nякому потрібно надати права редагування;
:Власник опитування натискає\nкнопку "Надати права редагування";

|Система|
:Надає права редагування користувачу\n\t\t<font color="red"><b>(можлива ЕХ11.01);

|Користувач|
:Користувач отримує права редагування;
stop;

@enduml

### Забрати права редактора

| ID: | **Remove_Editor** |
|:----|:------------|
| **Назва** | Забрати права редактора |
| **Учасники** | Система, користувач |
| **Передумови** | Користувач зареєстрований і перебуває на особистій сторінці, користувач створив опитування |
| **Результат** | Відкликано права редагування іншого користувача |
| **Виключні ситуації** | ЕХ12.01 Користувача не знайдено |

@startuml

|Користувач|
start;
:Власник опитування переходить на особисту сторінку;
:Власник опитування обирає потрібне опитування;
:Власник опитування натискає кнопку "Керувати доступом";

|Система|
:Повертає вікно з знайомими користувачами,\nпошуком користувачів та користувачами,\n\t  які мають права редагування;

|Користувач|
:Власник опитування обирає користувача,\nв якого потрібно забрати права редагування;
:Власник опитування натискає\nкнопку "Забрати права редагування";

|Система|
:Забирає права редагування у користувача\n\t\t<font color="red"><b>(можлива ЕХ12.01);

|Користувач|
stop;

@enduml


